+ mkdir -p /tmp/20
+ cat examples/list_etc_files_not_from_rpms.sh
#! /bin/sh

logfile=$1

list_files () {
    local dir=$1
    find $dir -type f
}

is_not_from_rpm () {
    local f=$1
    LANG=C rpm -qf $f | grep -q 'is not owned' 2>/dev/null
}

(
for f in $(list_files /etc)
do
    is_not_from_rpm $f && echo $f
done
) > $logfile
+ examples/list_etc_files_not_from_rpms.sh /tmp/20/etc.not_from_package.files
find: `/etc/lvm/backup': 許可がありません
find: `/etc/lvm/archive': 許可がありません
find: `/etc/lvm/cache': 許可がありません
find: `/etc/pki/rsyslog': 許可がありません
find: `/etc/pki/CA/private': 許可がありません
find: `/etc/sudoers.d': 許可がありません
find: `/etc/selinux/targeted/modules/active': 許可がありません
find: `/etc/audit': 許可がありません
find: `/etc/sssd': 許可がありません
find: `/etc/libvirt': 許可がありません
find: `/etc/cups/ssl': 許可がありません
find: `/etc/dhcp': 許可がありません
find: `/etc/audisp': 許可がありません
find: `/etc/polkit-1/localauthority': 許可がありません
+ pmaker -n etcdata --pversion 0.1 -v -w /tmp/20 --stepto sbuild /tmp/20/etc.not_from_package.files
06:28:36 INFO    Using config parser: <class 'pmaker.anycfg.IniConfigParser'>
06:28:36 INFO    /etc/pmaker.conf does not exist.
06:28:36 INFO    Using config parser: <class 'pmaker.anycfg.IniConfigParser'>
06:28:36 INFO    /home/ssato/.config/pmaker does not exist.
06:28:36 INFO    Using config parser: <class 'pmaker.anycfg.IniConfigParser'>
06:28:36 INFO    /home/ssato/.pmakerrc does not exist.
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/ssh/ssh_host_dsa_key.pub
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/ssh/ssh_host_key.pub
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/ssh/ssh_host_dsa_key
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/ssh/ssh_host_key
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/ssh/ssh_host_rsa_key
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/ssh/ssh_host_rsa_key.pub
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/sysconfig/clock
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/sysconfig/kernel
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/sysconfig/keyboard
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/sysconfig/iptables
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/sysconfig/network-scripts/ifcfg-自動_Red_Hat_Guest
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/sysconfig/network-scripts/ifcfg-eth0
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/sysconfig/network-scripts/keys-自動_Red_Hat_Guest
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/sysconfig/network
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/sysconfig/i18n
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/sysconfig/ip6tables
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/dconf/db/gdm
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/gconf/gconf.xml.defaults/%gconf-tree-en.xml
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/gconf/gconf.xml.defaults/%gconf-tree.xml
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/udev/rules.d/70-persistent-net.rules
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/gshadow-
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/shadow-
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/modprobe.d/anaconda.conf
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/yum.repos.d/packagekit-media.repo
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/yum.repos.d/livecd-extras.repo
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/prelink.cache
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/aliases.db
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/group-
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/passwd.OLD
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/.pwd.lock
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/resolv.conf
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/iscsi/initiatorname.iscsi
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/blkid/blkid.tab
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/blkid/blkid.tab.old
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/nsswitch.conf.bak
06:28:36 INFO    Not in rpm db. Looks no rpms own /etc/passwd-
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/.pwd.lock, type=file
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/aliases.db, type=file
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/gshadow-, type=file
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/passwd-, type=file
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/shadow-, type=file
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/ssh/ssh_host_dsa_key, type=file
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/ssh/ssh_host_key, type=file
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/ssh/ssh_host_rsa_key, type=file
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/sysconfig/ip6tables, type=file
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/sysconfig/iptables, type=file
06:28:36 WARNING Filtered out as not permitted to read: path=/etc/sysconfig/network-scripts/keys-自動_Red_Hat_Guest, type=file
06:28:36 INFO    Setting up src tree in /tmp/20/etcdata-0.1: etcdata
06:28:36 INFO    Run: cp -a /etc/blkid/blkid.tab /tmp/20/etcdata-0.1/src/etc/blkid/blkid.tab > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/blkid/blkid.tab.old /tmp/20/etcdata-0.1/src/etc/blkid/blkid.tab.old > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/dconf/db/gdm /tmp/20/etcdata-0.1/src/etc/dconf/db/gdm > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/gconf/gconf.xml.defaults/%gconf-tree-en.xml /tmp/20/etcdata-0.1/src/etc/gconf/gconf.xml.defaults/%gconf-tree-en.xml > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/gconf/gconf.xml.defaults/%gconf-tree.xml /tmp/20/etcdata-0.1/src/etc/gconf/gconf.xml.defaults/%gconf-tree.xml > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/group- /tmp/20/etcdata-0.1/src/etc/group- > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/iscsi/initiatorname.iscsi /tmp/20/etcdata-0.1/src/etc/iscsi/initiatorname.iscsi > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/modprobe.d/anaconda.conf /tmp/20/etcdata-0.1/src/etc/modprobe.d/anaconda.conf > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/nsswitch.conf.bak /tmp/20/etcdata-0.1/src/etc/nsswitch.conf.bak > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/passwd.OLD /tmp/20/etcdata-0.1/src/etc/passwd.OLD > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/prelink.cache /tmp/20/etcdata-0.1/src/etc/prelink.cache > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/resolv.conf /tmp/20/etcdata-0.1/src/etc/resolv.conf > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/ssh/ssh_host_dsa_key.pub /tmp/20/etcdata-0.1/src/etc/ssh/ssh_host_dsa_key.pub > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/ssh/ssh_host_key.pub /tmp/20/etcdata-0.1/src/etc/ssh/ssh_host_key.pub > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/ssh/ssh_host_rsa_key.pub /tmp/20/etcdata-0.1/src/etc/ssh/ssh_host_rsa_key.pub > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/sysconfig/clock /tmp/20/etcdata-0.1/src/etc/sysconfig/clock > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/sysconfig/i18n /tmp/20/etcdata-0.1/src/etc/sysconfig/i18n > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/sysconfig/kernel /tmp/20/etcdata-0.1/src/etc/sysconfig/kernel > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/sysconfig/keyboard /tmp/20/etcdata-0.1/src/etc/sysconfig/keyboard > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/sysconfig/network /tmp/20/etcdata-0.1/src/etc/sysconfig/network > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/sysconfig/network-scripts/ifcfg-eth0 /tmp/20/etcdata-0.1/src/etc/sysconfig/network-scripts/ifcfg-eth0 > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/sysconfig/network-scripts/ifcfg-自動_Red_Hat_Guest /tmp/20/etcdata-0.1/src/etc/sysconfig/network-scripts/ifcfg-自動_Red_Hat_Guest > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/udev/rules.d/70-persistent-net.rules /tmp/20/etcdata-0.1/src/etc/udev/rules.d/70-persistent-net.rules > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/yum.repos.d/livecd-extras.repo /tmp/20/etcdata-0.1/src/etc/yum.repos.d/livecd-extras.repo > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Run: cp -a /etc/yum.repos.d/packagekit-media.repo /tmp/20/etcdata-0.1/src/etc/yum.repos.d/packagekit-media.repo > /dev/null [/home/ssato/repos/public/github.com/ssato/packagemaker.git]
06:28:36 INFO    Using config parser: <class 'pmaker.anycfg.JsonConfigPaser'>
06:28:36 INFO    Run: touch /tmp/20/etcdata-0.1/pmaker-setup.stamp > /dev/null [/tmp/20/etcdata-0.1]
06:28:36 INFO    Preparing aux files in /tmp/20/etcdata-0.1: etcdata
06:28:36 INFO    Found template: /usr/share/pmaker/templates/1/autotools.single/configure.ac
06:28:36 INFO    Found template: /usr/share/pmaker/templates/1/autotools.single/Makefile.am
06:28:36 INFO    Found template: /usr/share/pmaker/templates/1/common/README
06:28:36 INFO    Found template: /usr/share/pmaker/templates/1/common/manifest
06:28:36 INFO    Found template: /usr/share/pmaker/templates/1/common/manifest.overrides
06:28:36 INFO    Found template: /usr/share/pmaker/templates/1/common/apply-overrides
06:28:36 INFO    Found template: /usr/share/pmaker/templates/1/common/revert-overrides
06:28:36 INFO    Found template: /usr/share/pmaker/templates/1/autotools/rpm.mk
06:28:36 INFO    Found template: /usr/share/pmaker/templates/1/autotools/package.spec
06:28:36 INFO    Run: touch /tmp/20/etcdata-0.1/pmaker-preconfigure.stamp > /dev/null [/tmp/20/etcdata-0.1]
06:28:36 INFO    Configuring build aux files: etcdata
06:28:36 INFO    Run: autoreconf -fi > /tmp/20/etcdata-0.1/pmaker.configure.log > /dev/null [/tmp/20/etcdata-0.1]
configure.ac:2: installing `./install-sh'
configure.ac:2: installing `./missing'
06:28:39 INFO    Run: touch /tmp/20/etcdata-0.1/pmaker-configure.stamp > /dev/null [/tmp/20/etcdata-0.1]
06:28:39 INFO    Building source package: etcdata
06:28:39 INFO    Run: ./configure --quiet --enable-silent-rules > /dev/null [/tmp/20/etcdata-0.1]
06:28:41 INFO    Run: make V=0 > /tmp/20/etcdata-0.1/pmaker.make.log > /dev/null [/tmp/20/etcdata-0.1]
06:28:41 INFO    Run: make dist V=0 > /tmp/20/etcdata-0.1/pmaker.make_dist.log > /dev/null [/tmp/20/etcdata-0.1]
06:28:41 INFO    Run: make srpm V=0 > /tmp/20/etcdata-0.1/pmaker.make_srpm.log > /dev/null [/tmp/20/etcdata-0.1]
06:28:42 INFO    Run: touch /tmp/20/etcdata-0.1/pmaker-sbuild.stamp > /dev/null [/tmp/20/etcdata-0.1]
+ ls /tmp/20/etcdata-0.1/
MANIFEST
MANIFEST.overrides
Makefile
Makefile.am
Makefile.in
README
aclocal.m4
apply-overrides
autom4te.cache
config.log
config.status
configure
configure.ac
etcdata-0.1-1.fc16.src.rpm
etcdata-0.1.tar.xz
etcdata.spec
install-sh
missing
pmaker-config.json
pmaker-configure.stamp
pmaker-filelist.pkl
pmaker-preconfigure.stamp
pmaker-sbuild.stamp
pmaker-setup.stamp
pmaker.configure.log
pmaker.make.log
pmaker.make_dist.log
pmaker.make_srpm.log
revert-overrides
rpm
rpm.mk
src
+ make -C /tmp/20/etcdata-0.1/ rpm
make: ディレクトリ `/tmp/20/etcdata-0.1' に入ります
{ test ! -d "etcdata-0.1" || { find "etcdata-0.1" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -fr "etcdata-0.1"; }; }
test -d "etcdata-0.1" || mkdir "etcdata-0.1"
test -n "" \
|| find "etcdata-0.1" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /tmp/20/etcdata-0.1/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "etcdata-0.1"
tardir=etcdata-0.1 && tar --format=posix -chf - "$tardir" | xz -c >etcdata-0.1.tar.xz
{ test ! -d "etcdata-0.1" || { find "etcdata-0.1" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -fr "etcdata-0.1"; }; }
  GEN    rpm
configure: WARNING: unrecognized options: --disable-dependency-tracking
configure: WARNING: unrecognized options: --disable-dependency-tracking
make: ディレクトリ `/tmp/20/etcdata-0.1' から出ます
+ rpm -qlp /tmp/20/etcdata-0.1/etcdata-0.1-1.fc16.noarch.rpm
/etc/blkid/blkid.tab
/etc/blkid/blkid.tab.old
/etc/dconf/db/gdm
/etc/gconf/gconf.xml.defaults/%gconf-tree-en.xml
/etc/gconf/gconf.xml.defaults/%gconf-tree.xml
/etc/group-
/etc/iscsi/initiatorname.iscsi
/etc/modprobe.d/anaconda.conf
/etc/nsswitch.conf.bak
/etc/passwd.OLD
/etc/prelink.cache
/etc/resolv.conf
/etc/ssh/ssh_host_dsa_key.pub
/etc/ssh/ssh_host_key.pub
/etc/ssh/ssh_host_rsa_key.pub
/etc/sysconfig/clock
/etc/sysconfig/i18n
/etc/sysconfig/kernel
/etc/sysconfig/keyboard
/etc/sysconfig/network
/etc/sysconfig/network-scripts/ifcfg-eth0
/etc/sysconfig/network-scripts/ifcfg-自動_Red_Hat_Guest
/etc/udev/rules.d/70-persistent-net.rules
/etc/yum.repos.d/livecd-extras.repo
/etc/yum.repos.d/packagekit-media.repo
/usr/share/doc/etcdata-0.1
/usr/share/doc/etcdata-0.1/README
/usr/share/doc/etcdata-0.1/pmaker-config.json
